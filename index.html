<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planning Op√©rationnel Dynamique</title>
    <link rel="stylesheet" href="style-base.css">
    <link rel="stylesheet" href="style-planning.css">
    <link rel="stylesheet" href="style-modals.css">
    <link rel="stylesheet" href="style-admin.css">
</head>
<body>
    
    <header id="planning-header">
        <h1>Planning Op√©rationnel</h1>

        <!-- √âL√âMENTS POUR LES HEURES DE SOLEIL -->
        <div id="sun-times-container">
            <label for="sunrise-input">Lever üåÖ</label>
            <input type="time" id="sunrise-input" value="06:30">
            <label for="sunset-input">Coucher üåá</label>
            <input type="time" id="sunset-input" value="21:00">
        </div>
        
        <!-- Conteneur pour la navigation par date -->
        <div id="date-navigation">
            <button id="prev-day-btn">< Pr√©c√©dent</button>
            
            <button id="calendar-btn">üìÖ</button>
            <div id="calendar-modal" class="hidden">
                <!-- Le calendrier sera g√©n√©r√© par JS ici -->
            </div>

            <h2 id="date-display"></h2>
            <button id="next-day-btn">Suivant ></button>
        </div>

        <button id="today-btn">Aujourd'hui</button>
        <!-- NOUVEAU : Boutons de sauvegarde et de chargement -->
        <button id="save-json-btn">Sauvegarder</button>
        <button id="load-json-btn">Charger</button>
        <input type="file" id="import-json-input" accept=".json" style="display: none;">

        <button id="export-pdf-btn">Exporter en PDF</button>
        <button id="admin-panel-btn">‚öôÔ∏è Admin</button>
    </header>

    <div class="planning-container">
        <div id="time-header-container">
            <div id="header-actions">
                <button id="add-task-btn">Ajouter</button>
            </div>
            <div id="hour-grid-wrapper">
                <!-- La grille horaire sera inject√©e ici par le JS -->
            </div>
        </div>
        <div id="tracks-container">
            <!-- Les pistes et les t√¢ches seront g√©n√©r√©es ici -->
        </div>
    </div>

    <!-- Fen√™tre modale pour le formulaire -->
    <div id="task-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Cr√©er une nouvelle t√¢che</h2>
                <button id="close-modal-btn" class="close-btn">√ó</button>
            </div>
            <div class="modal-body">
                <form id="task-form">
                    <div class="form-group">
                        <label for="task-type">Type de t√¢che</label>
                        <select id="task-type" name="type" required>
                            <!-- Les options seront g√©n√©r√©es par JS -->
                        </select>
                    </div>
                    <div id="dynamic-form-fields"></div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="cancel-btn" type="button">Annuler</button>
                <button id="save-task-btn" type="submit" form="task-form">Sauvegarder</button>
            </div>
        </div>
    </div>

    <!-- Modale pour les actions sur une t√¢che -->
    <div id="task-action-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="action-modal-title">Actions pour la t√¢che</h2>
                <button id="close-action-modal-btn" class="close-btn">√ó</button>
            </div>
            <div class="modal-body">
                <p>Que souhaitez-vous faire ?</p>
            </div>
            <div class="modal-footer" id="action-modal-footer">
                <!-- Les boutons seront ajout√©s par JS -->
            </div>
        </div>
    </div>

    <!-- Modale pour l'export PDF -->
    <div id="pdf-export-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Exporter le planning en PDF</h2>
                <button id="close-export-modal-btn" class="close-btn">√ó</button>
            </div>
            <div class="modal-body">
                <p>Veuillez s√©lectionner la plage de dates √† exporter.</p>
                <form id="pdf-export-form">
                    <div class="form-group">
                        <label for="export-start-date">Date de d√©but</label>
                        <input type="date" id="export-start-date" required>
                    </div>
                    <div class="form-group">
                        <label for="export-end-date">Date de fin</label>
                        <input type="date" id="export-end-date" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="cancel-export-btn" type="button">Annuler</button>
                <button id="generate-pdf-btn" type="submit" form="pdf-export-form">G√©n√©rer</button>
            </div>
        </div>
    </div>

    <!-- Modale pour le panneau d'administration -->
    <div id="admin-panel-modal" class="modal-overlay hidden">
        <div class="admin-panel-content">
            <div class="admin-panel-header">
                <h2>Panneau d'Administration</h2>
                <button id="close-admin-panel-btn" class="close-btn">√ó</button>
            </div>
            <div class="admin-panel-body">
                <nav class="admin-nav">
                    <button class="admin-nav-tab active" data-tab="tab-aircraft">Avions</button>
                    <button class="admin-nav-tab" data-tab="tab-tasks">T√¢ches de vol</button>
                    <button class="admin-nav-tab" data-tab="tab-configs">Configurations</button>
                    <button class="admin-nav-tab" data-tab="tab-areas">Zones de travail</button>
                    <button class="admin-nav-tab" data-tab="tab-equipments">√âquipements</button>
                    <button class="admin-nav-tab" data-tab="tab-crew">√âquipages</button>
                </nav>
                <main class="admin-main-content">
                    <div id="tab-aircraft" class="admin-tab-content active"></div>
                    <div id="tab-tasks" class="admin-tab-content"></div>
                    <div id="tab-configs" class="admin-tab-content"></div>
                    <div id="tab-areas" class="admin-tab-content"></div>
                    <div id="tab-equipments" class="admin-tab-content"></div>
                    <div id="tab-crew" class="admin-tab-content"></div>
                </main>
            </div>
        </div>
    </div>

    <script src="jspdf.umd.min.js"></script>
    <script src="html2canvas.min.js"></script>
    
    <!-- Scripts de l'application divis√©s -->
    <script src="js-01-config.js"></script>
    <script src="js-02-utils.js"></script>
    <script src="js-03-render-planning.js"></script>
    <script src="js-04-interactions.js"></script>
    <script src="js-05-modals-form.js"></script>
    <script src="js-06-modals-actions.js"></script>
    <script src="js-07-pdf-export.js"></script>
    <script src="js-08-io.js"></script>
    <script src="js-09-admin.js"></script>
    <script src="js-10-main.js"></script>

    <div id="task-tooltip" class="hidden"></div>   

</body>
</html>